# Курс Яндекс.Практикума «Архитектура ПО»

## Практическое задание 2-го спринта

Описания 2-го (mongo-sharding), 3-го (mongo-sharding-repl) и 4-го (sharding-repl-cache) заданий сделаны в соответствующих директориях.

### 5. Service Discovery и балансировка с API Gateway

На данном этапе в схему был добавлен ещё один инстанс **pymongo-api**. Их можно было добавить и больше, но сути это бы не изменило, а только бы затруднило чтение диаграммы. То же можно сказать и в отношении других сервисов, добавленных в этом задании.

В целях обеспечения Service Discovery добавлены 2 сервера Hashicorp Consul. Для того, чтобы сервисы могли регистрироваться в registry для каждого экземпляра сервиса в контейнер был добавлен экземпляр Consul, выступающий в роли агента.

Поскольку кластер MongoDB имеет свой инструментарий для управления конфигурацией, агенты Consul были добавлены только к инстансам роутеров (mongos) для мониторинга их доступности.

В качестве балансировщика входящего трафика и API-шлюза решено применить Hashicorp Fabio, поскольку он имеет тесную «внутреннюю» интеграцию с Consul и требует минимальной настройки.
